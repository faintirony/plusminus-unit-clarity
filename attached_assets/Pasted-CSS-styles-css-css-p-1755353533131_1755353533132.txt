CSS (полное обновление для styles.css)
css

Копировать код
/* Компактные однострочные карточки */
.products-list {
    display: flex;
    flex-direction: column;
    gap: 1px;
    margin-bottom: 40px;
    background: #e2e8f0;
    border-radius: 8px;
    overflow: hidden;
}

.product-card {
    background: white;
    transition: all 0.2s;
    border: none;
    border-radius: 0;
}

.product-card:hover {
    background: #f8fafc;
    box-shadow: inset 0 0 0 1px #cbd5e0;
}

.product-card:first-child {
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
}

.product-card:last-child {
    border-bottom-left-radius: 8px;
    border-bottom-right-radius: 8px;
}

/* Основной контент карточки - одна строка */
.card-content {
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 16px;
    min-height: 52px;
}

/* Иконка товара */
.product-image {
    width: 36px;
    height: 36px;
    background: #f7fafc;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
}

/* Название товара + площадка */
.product-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.product-title {
    font-size: 14px;
    font-weight: 600;
    color: #2d3748;
    margin-bottom: 2px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    line-height: 1.3;
}

.product-marketplace {
    font-size: 11px;
    color: #718096;
    font-weight: 500;
}

/* Колонки с метриками */
.metric-column {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    min-width: 70px;
    flex-shrink: 0;
}

.metric-column.price { min-width: 85px; }
.metric-column.cost-price { min-width: 85px; }
.metric-column.margin-rub { min-width: 75px; }
.metric-column.margin-percent { min-width: 65px; }

.metric-value {
    font-size: 14px;
    font-weight: 700;
    color: #2d3748;
    line-height: 1.2;
}

.metric-value.positive {
    color: #38a169;
}

.metric-value.negative {
    color: #e53e3e;
}

.metric-value.editable {
    cursor: pointer;
    padding: 2px 4px;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.metric-value.editable:hover {
    background: #edf2f7;
}

.metric-label {
    font-size: 9px;
    color: #a0aec0;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    margin-top: 1px;
    font-weight: 500;
}

/* Статус прибыльности */
.profitability-column {
    flex-shrink: 0;
    margin: 0 8px;
}

.profitability-badge {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

.profitability-badge.profitable {
    background: #c6f6d5;
    color: #22543d;
}

.profitability-badge.unprofitable {
    background: #fed7d7;
    color: #742a2a;
}

/* Табы-кнопки */
.product-tabs {
    display: flex;
    gap: 4px;
    flex-shrink: 0;
}

.tab-button {
    padding: 6px 8px;
    border: 1px solid #e2e8f0;
    background: #f8fafc;
    border-radius: 5px;
    font-size: 11px;
    font-weight: 500;
    color: #4a5568;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 4px;
    position: relative;
}

.tab-button:hover {
    background: #edf2f7;
    border-color: #cbd5e0;
}

.tab-button.active {
    background: #4299e1;
    color: white;
    border-color: #4299e1;
}

.tab-icon {
    font-size: 12px;
    line-height: 1;
}

.tab-text {
    white-space: nowrap;
    font-size: 11px;
}

/* Тултипы для табов */
.tab-button .tooltip {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: #2d3748;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 10px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
    z-index: 10;
    margin-bottom: 4px;
}

.tab-button .tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: #2d3748;
}

.tab-button:hover .tooltip {
    opacity: 1;
}

/* Детали табов */
.tab-content {
    display: none;
    padding: 16px;
    background: #f8fafc;
    border-top: 1px solid #e2e8f0;
    margin: 0 -16px -12px -16px;
}

.tab-content.active {
    display: block;
}

.tab-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 12px;
    background: white;
    border-radius: 6px;
    border: 1px solid #e2e8f0;
}

.detail-label {
    font-size: 12px;
    color: #718096;
    font-weight: 500;
}

.detail-value {
    font-size: 13px;
    font-weight: 600;
    color: #2d3748;
}

.detail-value.editable {
    cursor: pointer;
    padding: 2px 6px;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.detail-value.editable:hover {
    background: #edf2f7;
}

.detail-value.positive {
    color: #38a169;
}

.detail-value.negative {
    color: #e53e3e;
}

/* Адаптивность */

/* Широкие экраны (≥1200px) - показываем текст в табах */
@media (min-width: 1200px) {
    .tab-text {
        display: inline;
    }

    .tab-button .tooltip {
        display: none;
    }

    .tab-button {
        padding: 6px 10px;
    }
}

/* Средние экраны (768px-1199px) - только иконки с тултипами */
@media (max-width: 1199px) {
    .tab-text {
        display: none;
    }

    .product-marketplace {
        /* Сокращаем названия площадок */
        font-size: 10px;
    }

    .product-marketplace::first-letter {
        text-transform: uppercase;
    }
}

/* Мобильные экраны (<768px) */
@media (max-width: 767px) {
    .card-content {
        padding: 10px 12px;
        gap: 12px;
    }

    .product-image {
        width: 32px;
        height: 32px;
        font-size: 16px;
    }

    .product-title {
        font-size: 13px;
    }

    .product-marketplace {
        font-size: 10px;
    }

    /* Скрываем себестоимость и статус */
    .cost-price-column,
    .profitability-column {
        display: none;
    }

    .metric-column {
        min-width: 60px;
    }

    .metric-column.price { min-width: 70px; }

    .metric-value {
        font-size: 13px;
    }

    .metric-label {
        font-size: 8px;
    }

    .tab-button {
        padding: 5px 6px;
    }

    .tab-icon {
        font-size: 11px;
    }

    .tab-details {
        grid-template-columns: 1fr;
        gap: 8px;
    }
}

/* Очень узкие экраны (<480px) */
@media (max-width: 479px) {
    .card-content {
        gap: 8px;
        padding: 8px 10px;
    }

    .product-tabs {
        gap: 2px;
    }

    .tab-button {
        padding: 4px 5px;
        min-width: 28px;
    }

    .metric-column {
        min-width: 50px;
    }

    .metric-value {
        font-size: 12px;
    }
}

/* Состояния загрузки и пустые состояния */
.loading {
    text-align: center;
    padding: 40px;
    color: #718096;
    background: white;
    border-radius: 8px;
}

.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #718096;
    background: white;
    border-radius: 8px;
}

.empty-state h3 {
    color: #4a5568;
    margin-bottom: 8px;
    font-size: 18px;
}
JavaScript (обновления для script.js)
javascript

Копировать код
// Обновляем метод renderProducts в классе ProductManager

renderProducts() {
    const container = document.getElementById('productsList');

    if (this.filteredProducts.length === 0) {
        container.innerHTML = `
            <div class="empty-state">
                <h3>Товары не найдены</h3>
                <p>Попробуйте изменить параметры поиска или фильтры</p>
            </div>
        `;
        return;
    }

    container.innerHTML = this.filteredProducts.map(product => `
        <div class="product-card" data-product-id="${product.id}">
            <div class="card-content">
                <!-- Иконка товара -->
                <div class="product-image">
                    ${this.getProductIcon(product.category)}
                </div>

                <!-- Название + площадка -->
                <div class="product-info">
                    <div class="product-title" title="${product.name}">
                        ${product.name}
                    </div>
                    <div class="product-marketplace">
                        ${this.getMarketplaceName(product.marketplace)}
                    </div>
                </div>

                <!-- Цена продажи -->
                <div class="metric-column price">
                    <div class="metric-value">${this.formatCurrency(product.salePrice)}</div>
                    <div class="metric-label">Цена</div>
                </div>

                <!-- Себестоимость -->
                <div class="metric-column cost-price-column">
                    <div class="metric-value editable" onclick="editCostPrice('${product.id}')">
                        ${this.formatCurrency(product.costPrice)}
                    </div>
                    <div class="metric-label">Себестоимость</div>
                </div>

                <!-- Маржа в рублях -->
                <div class="metric-column margin-rub">
                    <div class="metric-value ${product.marginRub >= 0 ? 'positive' : 'negative'}">
                        ${this.formatCurrency(product.marginRub)}
                    </div>
                    <div class="metric-label">Маржа ₽</div>
                </div>

                <!-- Маржа в процентах -->
                <div class="metric-column margin-percent">
                    <div class="metric-value ${product.marginPercent >= 0 ? 'positive' : 'negative'}">
                        ${product.marginPercent.toFixed(1)}%
                    </div>
                    <div class="metric-label">Маржа %</div>
                </div>

                <!-- Статус прибыльности -->
                <div class="profitability-column">
                    <span class="profitability-badge ${product.isProfitable ? 'profitable' : 'unprofitable'}">
                        ${product.isProfitable ? 'ПРИБЫЛЬНЫЙ' : 'УБЫТОЧНЫЙ'}
                    </span>
                </div>

                <!-- Табы -->
                <div class="product-tabs">
                    <button class="tab-button" data-tab="finances" data-product="${product.id}">
                        <span class="tab-icon">💰</span>
                        <span class="tab-text">Финансы</span>
                        <div class="tooltip">Финансы</div>
                    </button>
                    <button class="tab-button" data-tab="expenses" data-product="${product.id}">
                        <span class="tab-icon">📊</span>
                        <span class="tab-text">Расходы</span>
                        <div class="tooltip


Д
Вы

сгенерируй то же самое ещё раз запрос оборвался


Claude Sonnet 4

Вот полный код для компактных однострочных карточек с адаптивной структурой:

CSS (полное обновление для styles.css)
css

Копировать код
/* Компактные однострочные карточки */
.products-list {
    display: flex;
    flex-direction: column;
    gap: 1px;
    margin-bottom: 40px;
    background: #e2e8f0;
    border-radius: 8px;
    overflow: hidden;
}

.product-card {
    background: white;
    transition: all 0.2s;
    border: none;
    border-radius: 0;
}

.product-card:hover {
    background: #f8fafc;
    box-shadow: inset 0 0 0 1px #cbd5e0;
}

.product-card:first-child {
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
}

.product-card:last-child {
    border-bottom-left-radius: 8px;
    border-bottom-right-radius: 8px;
}

/* Основной контент карточки - одна строка */
.card-content {
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 16px;
    min-height: 52px;
}

/* Иконка товара */
.product-image {
    width: 36px;
    height: 36px;
    background: #f7fafc;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
}

/* Название товара + площадка */
.product-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.product-title {
    font-size: 14px;
    font-weight: 600;
    color: #2d3748;
    margin-bottom: 2px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    line-height: 1.3;
}

.product-marketplace {
    font-size: 11px;
    color: #718096;
    font-weight: 500;
}

/* Колонки с метриками */
.metric-column {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    min-width: 70px;
    flex-shrink: 0;
}

.metric-column.price { min-width: 85px; }
.metric-column.cost-price { min-width: 85px; }
.metric-column.margin-rub { min-width: 75px; }
.metric-column.margin-percent { min-width: 65px; }

.metric-value {
    font-size: 14px;
    font-weight: 700;
    color: #2d3748;
    line-height: 1.2;
}

.metric-value.positive {
    color: #38a169;
}

.metric-value.negative {
    color: #e53e3e;
}

.metric-value.editable {
    cursor: pointer;
    padding: 2px 4px;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.metric-value.editable:hover {
    background: #edf2f7;
}

.metric-label {
    font-size: 9px;
    color: #a0aec0;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    margin-top: 1px;
    font-weight: 500;
}

/* Статус прибыльности */
.profitability-column {
    flex-shrink: 0;
    margin: 0 8px;
}

.profitability-badge {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

.profitability-badge.profitable {
    background: #c6f6d5;
    color: #22543d;
}

.profitability-badge.unprofitable {
    background: #fed7d7;
    color: #742a2a;
}

/* Табы-кнопки */
.product-tabs {
    display: flex;
    gap: 4px;
    flex-shrink: 0;
}

.tab-button {
    padding: 6px 8px;
    border: 1px solid #e2e8f0;
    background: #f8fafc;
    border-radius: 5px;
    font-size: 11px;
    font-weight: 500;
    color: #4a5568;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 4px;
    position: relative;
}

.tab-button:hover {
    background: #edf2f7;
    border-color: #cbd5e0;
}

.tab-button.active {
    background: #4299e1;
    color: white;
    border-color: #4299e1;
}

.tab-icon {
    font-size: 12px;
    line-height: 1;
}

.tab-text {
    white-space: nowrap;
    font-size: 11px;
}

/* Тултипы для табов */
.tab-button .tooltip {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: #2d3748;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 10px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
    z-index: 10;
    margin-bottom: 4px;
}

.tab-button .tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: #2d3748;
}

.tab-button:hover .tooltip {
    opacity: 1;
}

/* Детали табов */
.tab-content {
    display: none;
    padding: 16px;
    background: #f8fafc;
    border-top: 1px solid #e2e8f0;
    margin: 0 -16px -12px -16px;
}

.tab-content.active {
    display: block;
}

.tab-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 12px;
    background: white;
    border-radius: 6px;
    border: 1px solid #e2e8f0;
}

.detail-label {
    font-size: 12px;
    color: #718096;
    font-weight: 500;
}

.detail-value {
    font-size: 13px;
    font-weight: 600;
    color: #2d3748;
}

.detail-value.editable {
    cursor: pointer;
    padding: 2px 6px;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.detail-value.editable:hover {
    background: #edf2f7;
}

.detail-value.positive {
    color: #38a169;
}

.detail-value.negative {
    color: #e53e3e;
}

/* Адаптивность */

/* Широкие экраны (≥1200px) - показываем текст в табах */
@media (min-width: 1200px) {
    .tab-text {
        display: inline;
    }

    .tab-button .tooltip {
        display: none;
    }

    .tab-button {
        padding: 6px 10px;
    }
}

/* Средние экраны (768px-1199px) - только иконки с тултипами */
@media (max-width: 1199px) {
    .tab-text {
        display: none;
    }

    .product-marketplace {
        font-size: 10px;
    }
}

/* Мобильные экраны (<768px) */
@media (max-width: 767px) {
    .card-content {
        padding: 10px 12px;
        gap: 12px;
    }

    .product-image {
        width: 32px;
        height: 32px;
        font-size: 16px;
    }

    .product-title {
        font-size: 13px;
    }

    .product-marketplace {
        font-size: 10px;
    }

    /* Скрываем себестоимость и статус */
    .cost-price-column,
    .profitability-column {
        display: none;
    }

    .metric-column {
        min-width: 60px;
    }

    .metric-column.price { min-width: 70px; }

    .metric-value {
        font-size: 13px;
    }

    .metric-label {
        font-size: 8px;
    }

    .tab-button {
        padding: 5px 6px;
    }

    .tab-icon {
        font-size: 11px;
    }

    .tab-details {
        grid-template-columns: 1fr;
        gap: 8px;
    }
}

/* Очень узкие экраны (<480px) */
@media (max-width: 479px) {
    .card-content {
        gap: 8px;
        padding: 8px 10px;
    }

    .product-tabs {
        gap: 2px;
    }

    .tab-button {
        padding: 4px 5px;
        min-width: 28px;
    }

    .metric-column {
        min-width: 50px;
    }

    .metric-value {
        font-size: 12px;
    }
}

/* Состояния загрузки и пустые состояния */
.loading {
    text-align: center;
    padding: 40px;
    color: #718096;
    background: white;
    border-radius: 8px;
}

.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #718096;
    background: white;
    border-radius: 8px;
}

.empty-state h3 {
    color: #4a5568;
    margin-bottom: 8px;
    font-size: 18px;
}
JavaScript (полное обновление script.js)
javascript

Копировать код
// Моковые данные остаются теми же
const mockProducts = [
    {
        id: '1',
        name: 'iPhone 14 Pro Max 256GB Space Black',
        sellerSku: 'APL-IP14PM-256-SB',
        marketplace: 'Wildberries',
        category: 'Электроника',
        brand: 'Apple',
        subject: 'Смартфоны',
        sku: '123456789',
        barcode: '1234567890123',
        salePrice: 89990,
        costPrice: 75000,
        totalExpenses: 12500,
        marketplaceCommission: 4500,
        logistics: 890,
        acquiring: 900,
        returnsCost: 1200,
        utilization: 150,
        fines: 0,
        otherExpenses: 360,
        advertising: 4500,
        marginRub: 2490,
        marginPercent: 2.8,
        isProfitable: true
    },
    {
        id: '2',
        name: 'Кроссовки Nike Air Max 270 мужские черные 42',
        sellerSku: 'NK-AM270-BLK-42',
        marketplace: 'OZON',
        category: 'Обувь',
        brand: 'Nike',
        subject: 'Кроссовки',
        sku: '987654321',
        barcode: '9876543210987',
        salePrice: 8990,
        costPrice: 4500,
        totalExpenses: 2890,
        marketplaceCommission: 1349,
        logistics: 450,
        acquiring: 90,
        returnsCost: 300,
        utilization: 50,
        fines: 200,
        otherExpenses: 150,
        advertising: 650,
        marginRub: 1600,
        marginPercent: 17.8,
        isProfitable: true
    },
    {
        id: '3',
        name: 'Платье женское летнее с цветочным принтом размер M',
        sellerSku: 'DR-FL-SUM-M-01',
        marketplace: 'Wildberries',
        category: 'Одежда',
        brand: 'NoName',
        subject: 'Платья',
        sku: '456789123',
        barcode: '4567891234567',
        salePrice: 2990,
        costPrice: 890,
        totalExpenses: 1850,
        marketplaceCommission: 449,
        logistics: 280,
        acquiring: 30,
        returnsCost: 180,
        utilization: 20,
        fines: 50,
        otherExpenses: 90,
        advertising: 750,
        marginRub: 250,
        marginPercent: 8.4,
        isProfitable: true
    },
    {
        id: '4',
        name: 'Чехол для телефона силиконовый прозрачный iPhone 14',
        sellerSku: 'CS-SIL-TR-IP14',
        marketplace: 'OZON',
        category: 'Аксессуары',
        brand: 'Generic',
        subject: 'Чехлы',
        sku: '789123456',
        barcode: '7891234567890',
        salePrice: 590,
        costPrice: 120,
        totalExpenses: 385,
        marketplaceCommission: 89,
        logistics: 95,
        acquiring: 6,
        returnsCost: 30,
        utilization: 5,
        otherExpenses: 15,
        advertising: 225,
        marginRub: 85,
        marginPercent: 14.4,
        isProfitable: true
    },